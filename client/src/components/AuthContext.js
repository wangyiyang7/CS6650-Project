import React, { createContext, useState, useEffect } from "react";

export const AuthContext = createContext();

export const AuthProvider = ({ children }) => {
  const [isAuthenticated, setIsAuthenticated] = useState(true);

  const [loading, setLoading] = useState(true);
  const numbers = [
    6724726993, 2345678901, 3456789012, 4567890123, 5678901234, 6789012345,
    7890123456, 8901234567, 9012345678, 1023456789, 1134567890, 1245678901,
    1356789012, 1467890123, 1578901234, 1689012345, 1790123456, 1801234567,
    1912345678, 2023456789, 2134567890, 2245678901, 2356789012, 2467890123,
    2578901234, 2689012345, 2790123456, 2801234567, 2912345678, 3023456789,
    3134567890, 3245678901, 3356789012, 3467890123, 3578901234, 3689012345,
    3790123456, 3801234567, 3912345678, 4023456789, 4134567890, 4245678901,
    4356789012, 4467890123, 4578901234, 4689012345, 4790123456, 4801234567,
    4912345678, 5023456789, 5134567890, 5245678901, 5356789012, 5467890123,
    5578901234, 5689012345, 5790123456, 5801234567, 5912345678, 6023456789,
    6134567890, 6245678901, 6356789012, 6467890123, 6578901234, 6689012345,
    6790123456, 6801234567, 6912345678, 7023456789, 7134567890, 7245678901,
    7356789012, 7467890123, 7578901234, 7689012345, 7790123456, 7801234567,
    7912345678, 8023456789, 8134567890, 8245678901, 8356789012, 8467890123,
    8578901234, 8689012345, 8790123456, 8801234567, 8912345678, 9023456789,
    9134567890, 9245678901, 9356789012, 9467890123, 9578901234, 9689012345,
    9790123456, 9801234567, 9912345678, 1012345678, 1123456789, 1234567891,
    1345678912, 1456789123, 1567891234, 1678912345, 1789123456, 1891234567,
    1912345679, 2012345678, 2123456789, 2234567891, 2345678912, 2456789123,
    2567891234, 2678912345, 2789123456, 2891234567, 2912345679, 3012345678,
    3123456789, 3234567891, 3345678912, 3456789123, 3567891234, 3678912345,
    3789123456, 3891234567, 3912345679, 4012345678, 4123456789, 4234567891,
    4345678912, 4456789123, 4567891234, 4678912345, 4789123456, 4891234567,
    4912345679, 5012345678, 5123456789, 5234567891, 5345678912, 5456789123,
    5567891234, 5678912345, 5789123456, 5891234567, 5912345679, 6012345678,
    6123456789, 6234567891, 6345678912, 6456789123, 6567891234, 6678912345,
    6789123456, 6891234567, 6912345679,
  ];
  const [accountId, setAccountId] = useState(
    numbers[Math.floor(Math.random() * numbers.length)]
  );

  useEffect(() => {
    // const token = localStorage.getItem("token");
    localStorage.setItem("accountId", accountId);
    const storedAccountId = localStorage.getItem("accountId");

    if (/*token && */ storedAccountId) {
      setIsAuthenticated(true);
      setAccountId(storedAccountId);
    }
    setLoading(false);
  }, []);
  /*
  const login = (token, accountId) => {
    localStorage.setItem("token", token);*/
  const login = (accountId) => {
    localStorage.setItem("accountId", accountId);
    setIsAuthenticated(true);
    setAccountId(accountId);
  };

  const logout = () => {
    // localStorage.removeItem("token");
    // localStorage.removeItem("accountId");
    setIsAuthenticated(false);
    setAccountId(null);
  };

  return (
    <AuthContext.Provider
      value={{ isAuthenticated, loading, accountId, login, logout }}
    >
      {children}
    </AuthContext.Provider>
  );
};
